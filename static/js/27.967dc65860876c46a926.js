webpackJsonp([27],{AuV5:function(e,t,o){"use strict";var a=o("kV13"),n=o("bREw");o("b9fT");t.a=function(e){var t=e.files,o=new FormData;if(e.params)for(var i in e.params)o.append(i,e.params[i]);function s(){var t;(t=new XMLHttpRequest).open("post",e.url,!0),t.upload.onprogress=e.progressFunction,t.setRequestHeader("Authentication",n.a.state.token),t.send(o),t.onload=r,t.onerror=e.error}function r(t){var o=JSON.parse(t.target.responseText);e.success(o),1e4==o.code?e.paramsName?a.default.prototype.$Message.success("上传成功"):a.default.prototype.$Message.success("上传成功"+o.data.length+"个文件"):a.default.prototype.$Message.warning({duration:3,content:o.msg})}$.each(t,function(t,n){var i=!1;e.fileLists&&e.fileLists.forEach(function(e){if(e.fileName==n.name)return i=!0,void a.default.prototype.$Message.success(e.fileName+"文件已存在")}),i||(e.paramsName?o.append(e.paramsName,n):o.append("files",n))}),-1===navigator.userAgent.toLowerCase().indexOf("trident")&&0===o.getAll("files").length&&0==o.getAll(e.paramsName).length||s()}},FyRE:function(e,t){},"a+g3":function(e,t,o){"use strict";var a={buttonStyle:function(e){return{color:e,fontSize:"13px",display:"flex",marginLeft:"8px",alignItems:"center",justifyContent:"center",cursor:"pointer"}},disAbledButtonStyle:function(e){return{color:e,fontSize:"13px",display:"flex",marginLeft:"8px",alignItems:"center",justifyContent:"center"}},Icon:function(e,t,o){return[e("Icon",{props:{type:t,size:"18"}}),e("span",o)]},edit:function(e,t,o,n){return e("span",n?{style:a.disAbledButtonStyle("#ccc")}:{style:a.buttonStyle("#4eb59a"),on:{click:function(){o(t)}}},[e("Icon",{props:{type:"md-brush",size:"16"}}),e("span","修改")])},info:function(e,t,o,n){return e("span",n?{style:a.disAbledButtonStyle("#ccc")}:{style:a.buttonStyle("#2e93db"),on:{click:function(){o(t)}}},[e("Icon",{props:{type:"ios-paper",size:"16"}}),e("span","详情")])},del:function(e,t,o,n){return e("span",n?{style:a.disAbledButtonStyle("#ccc")}:{style:a.buttonStyle("#e3a377"),on:{click:function(){o(t)}}},[e("Icon",{props:{type:"ios-trash",size:"16"}}),e("span","删除")])},handle:function(e,t,o,n){return e("span",n?{style:a.disAbledButtonStyle("#ccc")}:{style:a.buttonStyle("#e3a377"),on:{click:function(){o(t)}}},[e("Icon",{props:{type:"md-alert",size:"16"}}),e("span","处理")])},render:function(e,t,o){return 0==t.length?e("div",{style:{display:"flex",justifyContent:"space-around"}},"无操作权限"):e("div",{style:{display:"flex",justifyContent:o?"left":"space-around"}},t)}};t.a=a},bNNP:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("aA9S"),n=o.n(a),i=o("IHPB"),s=o.n(i),r=o("3cXf"),l=o.n(r),c=o("a+g3"),d=o("tUlN"),p=o("b9fT"),u=o("cyTr"),m=o("AuV5"),y={name:"worker",inject:["reload"],components:{sendVoice:u.a},data:function(){var e=this;return{inputDevice:"",deviceImeiListShow:!1,employeeEntryModal:!1,employeeBankCard:!1,fileName:"导入",tableLoading:!1,leaveScore:0,leaveComment:"",employeeLeaveModal:!1,modalLoading:!0,deviceImeis:"",deviceImeiLists:[],projectData:{},timeSection:[],queryProjectIds:[],sendVoiceEmployees:[],voiceType:"",userInfo:{employeeName:"",employeeStatus:"",endHireDate:"",startHireDate:"",proIds:[],keywords:"",teamId:"",workId:"",isBind:""},devices:[],teams:[],works:[],total:0,p:1,l:10,list:[],downExHref:"",choseEmployee:{},currentEmployeeInfo:{},projectList:[],sendType:"single",bindDeviceModal:!1,sendVoiceModal:!1,tablelist:[{title:"序号",type:"index",width:70,align:"center"},{title:"照片",key:"headUrl",render:function(e,t){return e("img",{attrs:{src:t.row.headUrl},style:{width:"30px",height:"30px"}})}},{title:"姓名",key:"employeeName"},{title:"设备号",key:"deviceImei",width:140,render:function(e,t){return 0==t.row.deviceImei?e("span",""):e("span",t.row.deviceImei)}},{title:"身份证号",key:"cardNumber",width:160},{title:"项目",key:"projectName"},{title:"班组",key:"teamName"},{title:"工种",key:"workName"},{title:"入职时间",key:"hireDate",render:function(e,t){return e("span",t.row.hireDate.slice(0,10))}},{title:"状态",width:70,key:"employeeStatus",render:function(e,t){return 1==t.row.employeeStatus?e("span","在职"):e("span","离职")}},{title:"操作",key:"action",align:"center",width:450,render:function(t,o){var a=c.a.info(t,o,e.workerInfo),n=(c.a.edit(t,o,e.editEmployee),c.a.edit(t,o,e.editEmployee,!1),t("span",{style:c.a.buttonStyle("#4eb59a"),on:{click:function(){e.trace(o)}}},c.a.Icon(t,"ios-basketball-outline","轨迹"))),i=t("span",{style:c.a.disAbledButtonStyle("#ccc")},c.a.Icon(t,"ios-basketball-outline","轨迹")),s=t("span",{style:c.a.buttonStyle("#4eb59a"),on:{click:function(){e.downQRcode(o.row.qrCode)}}},c.a.Icon(t,"ios-download-outline","下载二维码")),r=t("span",{style:c.a.buttonStyle("#4eb59a"),on:{click:function(){e.unbindDevice(o.row)}}},c.a.Icon(t,"ios-log-out","解绑设备号")),l=t("span",{style:c.a.disAbledButtonStyle("#ccc")},c.a.Icon(t,"ios-log-out","解绑设备号")),d=t("span",{style:c.a.buttonStyle("#952ea0"),on:{click:function(){e.bindDeviceModalShow(o.row)}}},c.a.Icon(t,"ios-log-in","绑定设备号")),p=t("span",{style:c.a.disAbledButtonStyle("#ccc")},c.a.Icon(t,"ios-log-in","绑定设备号")),u=t("span",{style:c.a.buttonStyle("#4eb59a"),on:{click:function(){e.leave(o.row)}}},c.a.Icon(t,"ios-log-out","离职")),m=t("span",{style:c.a.disAbledButtonStyle("#ccc")},c.a.Icon(t,"ios-log-out","离职")),y=t("span",{style:c.a.buttonStyle("#952ea0"),on:{click:function(){e.entery(o.row)}}},c.a.Icon(t,"ios-log-in","再次入职")),h=t("span",{style:c.a.buttonStyle("#4eb59a"),on:{click:function(){e.sendVoice(o)}}},c.a.Icon(t,"ios-log-out","发送语音")),v=t("span",{style:c.a.disAbledButtonStyle("#ccc")},c.a.Icon(t,"ios-log-out","发送语音")),f=t("span",{style:c.a.disAbledButtonStyle("#ccc")},c.a.Icon(t,"ios-log-in","再次入职")),I=[];return I.push(a),I.push(s),e.$_has("/device/sendVoice")&&(1==o.row.isShare||"0"===o.row.deviceImei||null===o.row.deviceImei?I.push(v):I.push(h)),o.row.latitude||o.row.longitude?I.push(n):I.push(i),null==o.row.deviceImei||"0"==o.row.deviceImei?e.$_has("/project/employee/bindDevice")&&(1==o.row.isShare?I.push(p):I.push(d)):e.$_has("/project/employee/unbindDevice")&&(1==o.row.isShare?I.push(l):I.push(r)),1==o.row.employeeStatus?e.$_has("/project/employee/employeeLeave")&&(1==o.row.isShare?I.push(m):I.push(u)):e.$_has("/project/employee/againInauguration")&&(I=1==o.row.isShare?[f]:[y]),c.a.render(t,I)}}]}},mounted:function(){this.getList()},updated:function(){this.modalLoading=!0},methods:{oninputPar:function(e){var t=e.target.value,o=e.srcElement;t>100&&(t=100),t<1&&(t=1),o.value=t,this.leaveScore=t},startUpload:function(){var e=this,t=document.getElementById("uploadFile").files;if(!t[0])return this.$Message.warning("请选择文件");this.fileName=t[0].name;var o=this;Object(m.a)({files:t,url:p.a.httpServer+"/project/employee/importEmployeeBank",params:{userId:this.$store.state.user.userId},paramsName:"file",success:function(t){document.getElementById("uploadFile").value="",1e4==t.code&&e.$Modal.remove(),10079!=t.code&&10082!=t.code||o.$Modal.confirm({title:"操作失败",okText:"导出",content:"<div>导入文件出错。是否导出错误原因文件？</div>",onOk:function(){window.location.href=t.data},onCancel:function(){o.$Modal.remove()}})},error:function(e){document.getElementById("uploadFile").value="",o.$Message.warning("上传失败")}})},downloadBankCard:function(){window.location.href=p.a.httpServer+"/project/employee/employeeBankTemplateExport?"+Object(d.a)()},uploadBankCard:function(){this.employeeBankCard=!0},cancleSendVoiceModal:function(){this.sendVoiceEmployees=[]},sureSendVoiceModal:function(){var e=this;this.voiceType=this.$refs.sendVoiceType.voiceType,this.voiceType?this.axios({url:"/device/sendVoice"},{informs:this.sendVoiceEmployees,voiceType:this.voiceType,type:2}).then(function(t){1e4==t.data.code?(e.$Message.success("语音发送成功"),e.modalLoading=!1,e.sendVoiceModal=!1):e.$Message.warning(t.data.msg)}):(this.modalLoading=!1,this.$Message.warning("请选择语音类型"))},editEmployee:function(e){var t={id:e.row.employeeId,isShare:e.row.isShare,projectId:e.row.projectId};this.$store.commit("nextPagePath",{path:"/project/employee/findEmployeeDetail",params:l()(t)})},sendVoice:function(e){this.voiceType="",this.sendVoiceEmployees=[],this.currentEmployeeInfo=e.row,this.sendVoiceEmployees[0]={deviceImei:e.row.deviceImei,informName:e.row.employeeName,projectId:e.row.projectId,teamId:e.row.teamId},this.sendVoiceModal=!0},sureLeave:function(){var e=this;this.leaveScore?this.leaveComment?this.$Modal.confirm({title:"提示",content:'<h3 style="color:#ffad00">确认为该员工办理离职？</h3>',onOk:function(){e.modalLoading=!1,e.axios({url:"/project/employee/employeeLeave"},{turnoverScore:e.leaveScore,resignationDescription:e.leaveComment,projectId:e.currentEmployeeInfo.projectId,infoId:e.currentEmployeeInfo.infoId,employeeId:e.currentEmployeeInfo.employeeId,deviceImei:e.currentEmployeeInfo.deviceImei}).then(function(t){1e4==t.data.code?(e.$Message.success("离职成功"),e.getList(),e.employeeLeaveModal=!1,e.leaveScore=null,e.leaveComment=""):e.$Message.warning(t.data.msg)})},onCancel:function(){e.modalLoading=!1}}):(this.$Message.warning("请填写离职评语"),this.modalLoading=!1):(this.$Message.warning("请填写离职评分"),this.modalLoading=!1)},leave:function(e){this.employeeLeaveModal=!0,this.currentEmployeeInfo=e,this.leaveScore=0,this.leaveComment=""},entery:function(e){var t={id:e.employeeId,projectId:e.projectId};this.$store.commit("nextPagePath",{path:"/project/employee/againInauguration",params:l()(t)})},getDeviceList:function(){var e=this;this.axios({url:"/project/employee/initNewEmplyeeData"},{id:this.choseEmployee.projectId}).then(function(t){1e4==t.data.code&&(e.deviceImeiLists=t.data.data.devices)})},bindDeviceModalShow:function(e){this.bindDeviceModal=!0,this.deviceImeiListShow=!1,this.inputDevice="",this.choseEmployee=e,this.deviceImeis="",this.getDeviceList()},bindDevice:function(){var e=this;this.axios({url:"/project/employee/bindDevice"},{deviceImei:this.deviceImeis,type:2,infoId:this.choseEmployee.infoId}).then(function(t){1e4==t.data.code?(e.$Message.success("绑定设备号成功"),e.modalLoading=!1,e.bindDeviceModal=!1,e.getList()):(e.$Message.warning(t.data.msg),e.modalLoading=!1)})},unbindDevice:function(e){var t=this;this.$Modal.confirm({title:"提示？",content:"确认解绑设备号？",onOk:function(){t.axios({url:"/project/employee/unbindDevice"},{deviceImei:e.deviceImei,type:2,infoId:e.infoId,projectId:e.projectId}).then(function(e){1e4==e.data.code?(t.getList(),t.$Message.success("解绑设备号成功")):t.$Message.warning(e.data.msg)})}})},downQRcode:function(e){var t=p.a.httpServer+"/project/employee/downloadQRcodeImg?"+Object(d.a)({id:e});window.location.href=t},exportEx:function(){this.getList("isExcel")},refreshList:function(){this.reload()},choseProject:function(e){var t=this;this.userInfo.proIds=e.projectIds,this.userInfo.teamId="",this.userInfo.workId="",this.devices=[],this.teams=[],this.works=[],this.axios({url:"/project/employee/initTeamWork"},{proIds:e.projectIds}).then(function(e){1e4==e.data.code&&(t.devices=e.data.data.devices,t.teams=e.data.data.teams,t.works=e.data.data.works)})},trace:function(e){var t=e.row,o=l()(t);sessionStorage.setItem("employeeMapInfo",o),window.open("/map.html?projectId="+t.projectId+"&employeeId="+t.employeeId,"_blank")},getProjectList:function(){var e=this;this.axios({url:"/project/collect/findProjectDeptTree"},{proIds:this.queryProjectIds}).then(function(t){1e4==t.data.code&&(e.projectData=t.data.data,e.projectList=[].concat(s()(t.data.data.projectDeptList),s()(t.data.data.projects)))})},uploadFrom:function(){0!=this.timeSection[0].length&&(this.userInfo.endHireDate=this.timeSection[1].getTime(),this.userInfo.startHireDate=this.timeSection[0].getTime());var e=n()({pageNum:this.p,pageSize:this.l,projectIds:this.queryProjectIds},this.userInfo);void 0===e.endHireDate?(delete e.startHireDate,delete e.endHireDate):""!=this.userInfo.startHireDate&&(e.startHireDate=p.a.getYMD(this.userInfo.startHireDate),e.endHireDate=p.a.getYMD(this.userInfo.endHireDate)),this.downExHref=p.a.httpServer+"/project/employee/downloadExcel?"+Object(d.a)(e),window.location.href=this.downExHref},getList:function(e){var t=this;0!=this.timeSection[0].length&&(this.userInfo.endHireDate=this.timeSection[1].getTime(),this.userInfo.startHireDate=this.timeSection[0].getTime());var o;o=n()(this.userInfo,{pageNum:this.p,pageSize:this.l}),this.tableLoading=!0,this.axios({url:"/project/employee/pagingQueryEmployee"},o).then(function(e){t.tableLoading=!1,1e4==e.data.code&&(t.total=e.data.data.total,t.list=e.data.data.list,t.queryProjectIds=e.data.data.queryProjectIds,t.getProjectList())}).catch(function(e){t.tableLoading=!1})},serachList:function(){this.getList()},pageChange:function(e){this.p=e,this.getList()},pageSizeChange:function(e){this.l=e,this.getList()},editWroject:function(e){this.$store.commit("nextPagePath",{path:"/project/employee/updateEmployee",params:l()(e.row)})},workerInfo:function(e){var t={id:e.row.employeeId,isShare:e.row.isShare,projectId:e.row.projectId};this.$store.commit("nextPagePath",{path:"/project/employee/findEmployeeDetail",params:l()(t)})},remove:function(e){this.list.splice(e,1)},rowClassName:function(e,t){return t%2==0?"table-row-odd":t%2==1?"table-row-even":""},inputClick:function(){this.deviceImeiListShow=!this.deviceImeiListShow},choseDeviceImei:function(e){this.deviceImeis=e,this.deviceImeiListShow=!1}},computed:{currentRoute:function(){return this.$store.state.app.currentRoute},deviceList:function(){var e=this;return this.deviceImeiLists.filter(function(t){return t.indexOf(e.inputDevice)>-1})},sendUserName:function(){return this.$store.state.user.userName}}},h={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"content-body employList"},[o("Row",[o("Col",{attrs:{span:"5"}},[o("div",[o("span",[e._v("项目：")]),e._v(" "),o("customselect",{attrs:{width:"200px","tree-data":e.projectData},on:{change:e.choseProject}})],1),e._v(" "),o("div",[o("span",[e._v("是否绑定设备：")]),e._v(" "),o("Select",{staticStyle:{width:"154px"},model:{value:e.userInfo.isBind,callback:function(t){e.$set(e.userInfo,"isBind",t)},expression:"userInfo.isBind"}},[o("Option",{attrs:{value:"",label:"全部"}}),e._v(" "),o("Option",{attrs:{value:"1",label:"是"}}),e._v(" "),o("Option",{attrs:{value:"0",label:"否"}})],1)],1)]),e._v(" "),o("Col",{attrs:{span:"4"}},[o("div",[o("span",[e._v("班组：")]),e._v(" "),o("Select",{staticStyle:{width:"154px"},model:{value:e.userInfo.teamId,callback:function(t){e.$set(e.userInfo,"teamId",t)},expression:"userInfo.teamId"}},e._l(e.teams,function(e,t){return o("Option",{key:t,attrs:{value:e.teamId,label:e.teamName}})}),1)],1),e._v(" "),o("div",[o("span",[e._v("搜索：")]),e._v(" "),o("Input",{staticStyle:{width:"154px"},attrs:{placeholder:"姓名/身份证号/手机号/设备号"},model:{value:e.userInfo.keywords,callback:function(t){e.$set(e.userInfo,"keywords",t)},expression:"userInfo.keywords"}})],1)]),e._v(" "),o("Col",{attrs:{span:"4"}},[o("div",[o("span",[e._v("所属工种：")]),e._v(" "),o("Select",{staticStyle:{width:"130px"},model:{value:e.userInfo.workId,callback:function(t){e.$set(e.userInfo,"workId",t)},expression:"userInfo.workId"}},e._l(e.works,function(t){return o("Option",{key:t.workId,attrs:{value:t.workId}},[e._v(e._s(t.workName))])}),1)],1)]),e._v(" "),o("Col",{attrs:{span:"5"}},[o("div",[o("span",[e._v("入职时间：")]),e._v(" "),o("DatePicker",{staticStyle:{width:"180px"},attrs:{format:"yyyy/MM/dd",type:"daterange",placement:"bottom-end",placeholder:"选择入职时间"},model:{value:e.timeSection,callback:function(t){e.timeSection=t},expression:"timeSection"}})],1)]),e._v(" "),o("Col",{attrs:{span:"5"}},[o("div",{staticStyle:{"line-height":"60px"}},[o("Button",{staticClass:"button search",attrs:{type:"primary"},on:{click:function(t){return e.serachList()}}},[o("Icon",{attrs:{type:"ios-search",size:"16"}}),e._v("查询\n\t\t\t\t")],1),e._v(" "),o("Button",{staticClass:"button refresh",attrs:{type:"primary"},on:{click:e.refreshList}},[o("Icon",{attrs:{type:"md-refresh",size:"16"}}),e._v("重置\n\t\t\t\t")],1)],1)])],1),e._v(" "),o("Row",[o("Col",{staticStyle:{"text-align":"right"},attrs:{span:24}},[e.$_has("/project/employee/fastInsertEmployee")?o("Button",{staticClass:"addRole",attrs:{type:"primary",color:"#2e94dc"},on:{click:function(t){return e.$router.push("/project/employee/insertEmployeeQuick")}}},[o("Icon",{staticStyle:{position:"relative",top:"-1px",right:"3px"},attrs:{type:"ios-add-circle-outline",size:"16"}}),e._v("快速录入\n\t\t\t")],1):e._e(),e._v(" "),e.$_has("/project/employee/insertEmployee")?o("Button",{staticClass:"addRole",attrs:{type:"primary",color:"#2e94dc"},on:{click:function(t){return e.$router.push("/project/employee/insertEmployee")}}},[o("Icon",{staticStyle:{position:"relative",top:"-1px",right:"3px"},attrs:{type:"ios-add-circle-outline",size:"16"}}),e._v("手动录入\n\t\t\t")],1):e._e(),e._v(" "),e.$_has("/project/employee/downloadExcel")?o("Button",{staticClass:"addRole",attrs:{type:"primary",color:"#2e94dc"},on:{click:e.uploadFrom}},[o("Icon",{staticStyle:{position:"relative",top:"-2px",right:"3px"},attrs:{type:"ios-download-outline",size:"17"}}),e._v("导出Excel\n\t\t\t")],1):e._e(),e._v(" "),e.$_has("/project/employee/importEmployeeBank")?o("Button",{staticClass:"addRole",attrs:{type:"primary",color:"#2e94dc"},on:{click:e.uploadBankCard}},[o("Icon",{staticStyle:{position:"relative",top:"-2px",right:"3px"},attrs:{type:"ios-download-outline",size:"17"}}),e._v("批量导入工人银行卡\n\t\t\t")],1):e._e()],1)],1),e._v(" "),o("div",{staticStyle:{"overflow-x":"auto"}},[o("Table",{staticClass:"default",staticStyle:{"min-width":"1100px"},attrs:{loading:e.tableLoading,"row-class-name":e.rowClassName,columns:e.tablelist,data:e.list}},[o("Loading",{attrs:{slot:"loading"},slot:"loading"})],1)],1),e._v(" "),o("Page",{directives:[{name:"show",rawName:"v-show",value:e.total>10,expression:"total>10"}],attrs:{total:e.total,current:e.p,"show-sizer":"","page-size-opts":[10,15,20],"show-total":""},on:{"on-change":e.pageChange,"on-page-size-change":e.pageSizeChange}}),e._v(" "),o("Modal",{attrs:{styles:{top:"25%"},loading:e.modalLoading,title:"绑定设备号"},on:{"on-ok":e.bindDevice},model:{value:e.bindDeviceModal,callback:function(t){e.bindDeviceModal=t},expression:"bindDeviceModal"}},[o("div",{staticClass:"deviceSelect_employeeList"},[o("Input",{staticStyle:{width:"170px"},attrs:{placeholder:"请选择设备号",readonly:""},nativeOn:{click:function(t){return t.stopPropagation(),e.inputClick(t)}},model:{value:e.deviceImeis,callback:function(t){e.deviceImeis=t},expression:"deviceImeis"}}),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.deviceImeiListShow,expression:"deviceImeiListShow"}],staticClass:"deviceListBox"},[o("Input",{staticStyle:{width:"172px",position:"relative",left:"-1px"},attrs:{type:"text",size:"small",placeholder:"输入设备号进行查询"},nativeOn:{click:function(e){e.stopPropagation()}},model:{value:e.inputDevice,callback:function(t){e.inputDevice=t},expression:"inputDevice"}}),e._v(" "),o("ul",{staticClass:"devoceImeiList"},[e._l(e.deviceList,function(t,a){return o("li",{directives:[{name:"show",rawName:"v-show",value:e.deviceList.length>0,expression:"deviceList.length>0"}],staticClass:"ivu-select-item",on:{click:function(o){return o.stopPropagation(),e.choseDeviceImei(t)}}},[e._v(e._s(t))])}),e._v(" "),o("li",{directives:[{name:"show",rawName:"v-show",value:0===e.deviceList.length,expression:"deviceList.length===0"}],staticStyle:{"text-align":"center"}},[e._v("暂无设备")])],2)],1)],1)]),e._v(" "),o("Modal",{staticClass:"sendVoiceModal classModal",attrs:{"mask-closable":!1,loading:e.modalLoading,styles:{width:"400px"},title:"发送确认"},on:{"on-ok":e.sureSendVoiceModal,"on-cancel":e.cancleSendVoiceModal},model:{value:e.sendVoiceModal,callback:function(t){e.sendVoiceModal=t},expression:"sendVoiceModal"}},[e.sendVoiceModal?o("sendVoice",{ref:"sendVoiceType",attrs:{employeeInfo:e.currentEmployeeInfo,employeeLength:e.sendVoiceEmployees.length,type:e.sendType}}):e._e()],1),e._v(" "),o("Modal",{attrs:{loading:e.modalLoading,styles:{top:"25%"},title:"员工离职"},on:{"on-ok":e.sureLeave},model:{value:e.employeeLeaveModal,callback:function(t){e.employeeLeaveModal=t},expression:"employeeLeaveModal"}},[o("div",{staticStyle:{"font-size":"16px","margin-bottom":"20px",display:"inline-block"}},[o("span",[e._v("离职评分：")]),e._v(" "),o("br"),e._v(" "),o("input",{staticStyle:{width:"100px"},attrs:{type:"number",min:1,max:100},on:{input:function(t){return e.oninputPar(t)}}})]),e._v(" "),o("div",{staticStyle:{"font-size":"16px"}},[o("span",[e._v("离职评语：")]),e._v(" "),o("br"),e._v(" "),o("Input",{staticStyle:{width:"80%"},attrs:{type:"textarea",autosize:{minRows:3,maxRows:20},placeholder:"离职评语"},model:{value:e.leaveComment,callback:function(t){e.leaveComment=t},expression:"leaveComment"}})],1)]),e._v(" "),o("Modal",{staticClass:"classModal",attrs:{styles:{top:"15%"},title:"批量导入银行卡","footer-hide":""},model:{value:e.employeeBankCard,callback:function(t){e.employeeBankCard=t},expression:"employeeBankCard"}},[o("div",{staticClass:"downLoadBankCard"},[o("p",{staticClass:"bank-card-modal-title"},[e._v("工人银行模板下载")]),e._v(" "),o("Button",{attrs:{type:"primary"},on:{click:e.downloadBankCard}},[e._v("下载")])],1),e._v(" "),o("div",{staticClass:"uploadBankCard"},[o("p",[e._v("工人银行卡导入")]),e._v(" "),o("div",{staticClass:"uploadBox"},[o("input",{staticClass:"button_ipunt",attrs:{type:"file",id:"uploadFile"},on:{input:e.startUpload}}),e._v(" "),o("div",{staticClass:"button_box"},[e._v("导入")])])])])],1)},staticRenderFns:[]};var v=o("C7Lr")(y,h,!1,function(e){o("zQJr")},null,null);t.default=v.exports},cyTr:function(e,t,o){"use strict";var a=o("diQK"),n={name:"sendVoiceList",props:{employeeInfo:Object,type:String,employeeLength:Number},destroyed:function(){this.voiceType=""},data:function(){return{voiceList:a.a.sendVoiceType,currentIndex:-1,voiceType:""}},methods:{choseVoice:function(e,t){this.currentIndex=e,this.voiceType=t}}},i={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"sendVoiceList"},["multiple"===e.type?o("p",[o("span",[e._v("共"+e._s(e.employeeLength)+"人")])]):e._e(),e._v(" "),"single"===e.type?o("p",[o("span",[e._v(e._s(e.employeeInfo.employeeName))]),e._v(" "),o("span",[e._v(e._s(1==e.employeeInfo.gender?"男":"女"))]),e._v(" "),o("span",[e._v(e._s(e.employeeInfo.teamName))]),e._v(" "),o("span",[e._v(e._s(e.employeeInfo.workName))])]):e._e(),e._v(" "),o("ul",e._l(e.voiceList,function(t,a){return o("li",{key:a,attrs:{value:t.id},on:{click:function(o){return e.choseVoice(a,t.id)}}},[o("span",{staticClass:"select"},[o("span",{directives:[{name:"show",rawName:"v-show",value:e.currentIndex===a,expression:"currentIndex === index"}],staticClass:"selectBox"},[e._v("√")])]),e._v(" "),o("span",[e._v(e._s(t.name))])])}),0)])},staticRenderFns:[]};var s=o("C7Lr")(n,i,!1,function(e){o("FyRE")},"data-v-fa023cd0",null);t.a=s.exports},diQK:function(e,t,o){"use strict";var a={nation:["汉族","蒙古族","回族","藏族","维吾尔族","苗族","彝族","壮族","布依族","朝鲜族","满族","侗族","瑶族","白族","土家族","哈尼族","哈萨克族","傣族","黎族","傈僳族","佤族","畲族","高山族","拉祜族","水族","东乡族","纳西族","景颇族","柯尔克孜族","土族","达斡尔族","仫佬族","羌族","布朗族","撒拉族","毛南族","仡佬族","锡伯族","阿昌族","普米族","塔吉克族","怒族","乌孜别克族","俄罗斯族","鄂温克族","德昂族","保安族","裕固族","京族","塔塔尔族","独龙族","鄂伦春族","赫哲族","门巴族","珞巴族","基诺族"],actionStatus:{1:"正常","-1":"无定位","-2":"姿态异常","-3":"运动量异常","-4":"离线","-5":"姿态和运动量异常","-6":"无定位、姿态且运动量异常","-7":"无定位和姿态异常","-8":"无定位和运动量异常"},batteryStatus:{0:"0%",1:"25%",2:"50%",3:"75%",4:"100%"},hatColor:{0:"无帽子",1:"红色",2:"黄色",3:"蓝色",4:"白色",5:"橙色"},bloodType:{1:"A",2:"B",3:"O",4:"AB",0:"其它或未知"},bloodTypeArr:[{id:1,name:"A"},{id:2,name:"B"},{id:3,name:"O"},{id:4,name:"AB"},{id:0,name:"其它或未知"}],sendVoiceType:[{id:"1",name:"防空报警"},{id:"2",name:"请带好安全帽"},{id:"3",name:"危险请注意"},{id:"7",name:"已收到报警，请等待救援"},{id:"8",name:"附近有人需要救援"},{id:"9",name:"请不要违规作业"},{id:"10",name:"请回到岗位"},{id:"11",name:"请到办公室"},{id:"12",name:"请充电"},{id:"13",name:"请联系管理人员"},{id:"14",name:"你是否需要帮助"},{id:"15",name:"请立即撤离"},{id:"16",name:"请回电"}],statusText:{0:"倾斜",1:"倾斜",2:"风速",3:"力矩",4:"限位",5:"限位",6:"限位",7:"限位",8:"限位",9:"限位",10:"",11:""},statusTextList:[{ele:"#XMLID_8_",type:"0"},{ele:"#XMLID_8_",type:"0"},{ele:"#XMLID_9_",type:"0"},{ele:"#XMLID_15_",type:"0"},{ele:"#XMLID_17_",type:"0"},{ele:"#XMLID_6_",type:"0"},{ele:"#XMLID_18_",type:"0"},{ele:"#XMLID_4_",type:"0"},{ele:"#XMLID_16_",type:"0"},{ele:"#XMLID_7_",type:"0"},{ele:"#XMLID_22_",type:"0"},{ele:"#XMLID_21_",type:"0"},{ele:"#XMLID_19_",type:"0"},{ele:"#XMLID_3_",type:"0"},{ele:"#XMLID_20_",type:"0"},{ele:"#XMLID_2_",type:"0"},{ele:"#XMLID_14_",type:"0"},{ele:"#XMLID_12_",type:"0"},{ele:"#XMLID_11_",type:"0"},{ele:"#XMLID_13_",type:"0"},{ele:"#XMLID_10_",type:"0"}],employeeList:[{isShare:0,employeeId:123,infoId:118,employeeName:"张益林",deviceImei:"359972069684642",projectId:11,projectName:"筑邦科技",hireDate:"2019-03-14 11:20:38",leaveDate:null,employeeStatus:1,qrCode:428,headUrl:"http://test.zolbon.com:18888/igh/static/file/employee_head_man.png",cardNumber:"510824199401010531",phone:"15882606757",emergencyContactPerson:"李皮皮",emergencyContactNumber:"13645714241",teamName:"架工班",workName:"项目总工",hatNo:null,gender:1,age:25,nation:"汉族",bloodType:null,hatColor:null},{isShare:0,employeeId:167,infoId:166,employeeName:"电风扇",deviceImei:"0",projectId:11,projectName:"筑邦科技",hireDate:"2019-03-14 11:18:07",leaveDate:null,employeeStatus:1,qrCode:427,headUrl:"http://192.168.1.61:8888/igh/static/file/2019/03/14/ba936eed-2ad7-479c-ad5d-c78955adc02c.jpg",cardNumber:"520121199408232142",phone:null,emergencyContactPerson:"李皮皮",emergencyContactNumber:"13645714241",teamName:"测试班组",workName:"车工",hatNo:null,gender:1,age:25,nation:"汉族",bloodType:null,hatColor:null},{isShare:0,employeeId:128,infoId:123,employeeName:"张大三",deviceImei:"0",projectId:11,projectName:"筑邦科技",hireDate:"2019-03-11 17:36:19",leaveDate:null,employeeStatus:1,qrCode:423,headUrl:"http://test.zolbon.com:18888/igh/static/file/2019/03/08/7c39b614-94ae-4e61-a1e4-97106bdbdd9d.jpg",cardNumber:"520121199302141321",phone:null,emergencyContactPerson:"张益林",emergencyContactNumber:"15882606757",teamName:"测试班组",workName:"焊工",hatNo:null,gender:1,age:26,nation:"汉族",bloodType:null,hatColor:null},{isShare:0,employeeId:166,infoId:165,employeeName:"张益林",deviceImei:"359972069702006",projectId:11,projectName:"筑邦科技",hireDate:"2019-03-11 16:42:18",leaveDate:null,employeeStatus:1,qrCode:422,headUrl:"http://test.zolbon.com:18888/igh/static/file/2019/03/11/c3dfdd73f215468e96b36d73e51b697c.jpeg",cardNumber:"51082419940101053X",phone:null,emergencyContactPerson:"张益林",emergencyContactNumber:"15882606757",teamName:"测试班组",workName:"监工",hatNo:null,gender:1,age:25,nation:"汉族",bloodType:null,hatColor:null},{isShare:0,employeeId:165,infoId:164,employeeName:"罗静",deviceImei:"359972069706601",projectId:11,projectName:"筑邦科技",hireDate:"2019-03-11 16:42:18",leaveDate:null,employeeStatus:1,qrCode:421,headUrl:"http://192.168.1.61:8888/igh/static/file/2019/03/12\\d8278c8350544d54a092e71a0f650c71.jpg",cardNumber:"511323199512014768",phone:null,emergencyContactPerson:"张益林",emergencyContactNumber:"15882606757",teamName:"测试班组",workName:"监工",hatNo:null,gender:2,age:24,nation:"汉族",bloodType:null,hatColor:null},{isShare:0,employeeId:164,infoId:163,employeeName:"张益林",deviceImei:"359972069702014",projectId:11,projectName:"筑邦科技",hireDate:"2019-03-11 16:07:33",leaveDate:null,employeeStatus:1,qrCode:420,headUrl:"http://test.zolbon.com:18888/igh/static/file/2019/03/11/f8310a2573c04be3b6e8c9ae556a87ac.jpeg",cardNumber:"51082419940111053X",phone:null,emergencyContactPerson:"李皮皮",emergencyContactNumber:"13645714241",teamName:"架工班",workName:"车工",hatNo:null,gender:1,age:25,nation:"汉族",bloodType:null,hatColor:null},{isShare:0,employeeId:163,infoId:159,employeeName:"张益林",deviceImei:"0",projectId:11,projectName:"筑邦科技",hireDate:"2019-03-11 15:44:55",leaveDate:null,employeeStatus:1,qrCode:414,headUrl:"http://test.zolbon.com:18888/igh/static/file/2019/03/11/4a07561f2f384f87b8bfb24953a2fa64.jpeg",cardNumber:"51082429960101053X",phone:null,emergencyContactPerson:"张大仙",emergencyContactNumber:"12345674567",teamName:"测试班组",workName:"监工",hatNo:null,gender:1,age:-977,nation:"汉族",bloodType:null,hatColor:null},{isShare:0,employeeId:162,infoId:158,employeeName:"罗静",deviceImei:"0",projectId:11,projectName:"筑邦科技",hireDate:"2019-03-11 15:44:55",leaveDate:null,employeeStatus:1,qrCode:413,headUrl:"http://test.zolbon.com:18888/igh/static/file/2019/03/11/8312e978aa724a5696dbb9f4e91d309c.jpeg",cardNumber:"511323299512014768",phone:null,emergencyContactPerson:"张大仙",emergencyContactNumber:"12345674567",teamName:"测试班组",workName:"监工",hatNo:null,gender:2,age:-976,nation:"汉族",bloodType:null,hatColor:null},{isShare:0,employeeId:161,infoId:157,employeeName:"罗静",deviceImei:"0",projectId:11,projectName:"筑邦科技",hireDate:"2019-03-11 15:38:49",leaveDate:null,employeeStatus:1,qrCode:412,headUrl:"http://test.zolbon.com:18888/igh/static/file/2019/03/11/e639947f08e0468595cb576423c4bfc0.jpeg",cardNumber:"511323199212024768",phone:null,emergencyContactPerson:"李皮皮",emergencyContactNumber:"13645714241",teamName:"测试班组",workName:"焊工",hatNo:null,gender:2,age:27,nation:"汉族",bloodType:null,hatColor:null},{isShare:0,employeeId:157,infoId:153,employeeName:"张益林",deviceImei:"0",projectId:11,projectName:"筑邦科技",hireDate:"2019-03-11 15:38:49",leaveDate:null,employeeStatus:1,qrCode:408,headUrl:"http://test.zolbon.com:18888/igh/static/file/2019/03/11/0c3b219aef014c5da6789e9b29b6faea.jpeg",cardNumber:"51082419900102053X",phone:null,emergencyContactPerson:"李皮皮",emergencyContactNumber:"13645714241",teamName:"测试班组",workName:"焊工",hatNo:null,gender:1,age:29,nation:"汉族",bloodType:null,hatColor:null}]};t.a=a},tUlN:function(e,t,o){"use strict";var a=o("ZLEe"),n=o.n(a),i=o("IcnI");t.a=function(e){if(void 0!==e){var t={objKeySort:function(e){for(var t=n()(e).sort(),o={},a=0;a<t.length;a++)"string"==typeof e[t[a]]?o[t[a]]=e[t[a]].replace(/(^\s*)|(\s*$)/g,""):o[t[a]]=e[t[a]];return o}};for(var o in e=t.objKeySort(e),t.Authentication=i.a.state.user.token,t.userId=i.a.state.user.userId,t.data="",e)""!=e[o]&&(t.data+="&"+o+"="+e[o]);return"Authentication="+t.Authentication+"&userId="+t.userId+t.data}return"Authentication="+i.a.state.user.token+"&userId="+i.a.state.user.userId}},zQJr:function(e,t){}});